<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>4&nbsp;db-lib</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="file:///usr/share/doc/racket/local-redirect/local-redirect.js"></script><script type="text/javascript" src="file:///home/mordecai/.racket/6.1/doc/local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">LIQUID library</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Real-Time_Support.html" class="tocviewlink" data-pltdoc="x">Real-<wbr></wbr>Time Support</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="http-server.html" class="tocviewlink" data-pltdoc="x">http-<wbr></wbr>server</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Query-Parser.html" class="tocviewlink" data-pltdoc="x">Query-<wbr></wbr>Parser</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">db-<wbr></wbr>lib</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="tokens.html" class="tocviewlink" data-pltdoc="x">tokens</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>4&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">db-<wbr></wbr>lib</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">4.1&nbsp;</td><td><a href="#%28part._.Guide%29" class="tocviewlink" data-pltdoc="x">Guide</a></td></tr><tr><td align="right">4.2&nbsp;</td><td><a href="#%28part._reference%29" class="tocviewlink" data-pltdoc="x">reference</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#%28part._.Guide%29" class="tocsubseclink" data-pltdoc="x">Guide</a></td></tr><tr><td><span class="tocsublinknumber">4.1.1<tt>&nbsp;</tt></span><a href="#%28part._.A_.L.I.S.P_friendly_.Database_.Interface%29" class="tocsubseclink" data-pltdoc="x">A LISP friendly Database Interface</a></td></tr><tr><td><span class="tocsublinknumber">4.1.2<tt>&nbsp;</tt></span><a href="#%28part._.Program_.Level_.Type_.Interpretation%29" class="tocsubseclink" data-pltdoc="x">Program Level Type Interpretation</a></td></tr><tr><td><span class="tocsublinknumber">4.1.3<tt>&nbsp;</tt></span><a href="#%28part._.Explicit_.Key_.Management%29" class="tocsubseclink" data-pltdoc="x">Explicit Key Management</a></td></tr><tr><td><span class="tocsublinknumber">4.1.4<tt>&nbsp;</tt></span><a href="#%28part._.Fetch_by_.Match%29" class="tocsubseclink" data-pltdoc="x">Fetch by Match</a></td></tr><tr><td><span class="tocsublinknumber">4.1.5<tt>&nbsp;</tt></span><a href="#%28part.__with__.Contexts%29" class="tocsubseclink" data-pltdoc="x">&rsquo;with&rsquo; Contexts</a></td></tr><tr><td><span class="tocsublinknumber">4.2<tt>&nbsp;</tt></span><a href="#%28part._reference%29" class="tocsubseclink" data-pltdoc="x">reference</a></td></tr><tr><td><span class="tocsublinknumber">4.2.1<tt>&nbsp;</tt></span><a href="#%28part._as-transaction%29" class="tocsubseclink" data-pltdoc="x">as-<wbr></wbr>transaction</a></td></tr><tr><td><span class="tocsublinknumber">4.2.2<tt>&nbsp;</tt></span><a href="#%28part._column-list%29" class="tocsubseclink" data-pltdoc="x">column-<wbr></wbr>list</a></td></tr><tr><td><span class="tocsublinknumber">4.2.3<tt>&nbsp;</tt></span><a href="#%28part._db_alloc-name%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>alloc-<wbr></wbr>name</a></td></tr><tr><td><span class="tocsublinknumber">4.2.4<tt>&nbsp;</tt></span><a href="#%28part._db_alloc-number%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>alloc-<wbr></wbr>number</a></td></tr><tr><td><span class="tocsublinknumber">4.2.5<tt>&nbsp;</tt></span><a href="#%28part._db_create-keyspace%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>create-<wbr></wbr>keyspace</a></td></tr><tr><td><span class="tocsublinknumber">4.2.6<tt>&nbsp;</tt></span><a href="#%28part._db_create-table%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>create-<wbr></wbr>table</a></td></tr><tr><td><span class="tocsublinknumber">4.2.7<tt>&nbsp;</tt></span><a href="#%28part._db_delete-keyspace%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>delete-<wbr></wbr>keyspace</a></td></tr><tr><td><span class="tocsublinknumber">4.2.8<tt>&nbsp;</tt></span><a href="#%28part._db_delete-table%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>delete-<wbr></wbr>table</a></td></tr><tr><td><span class="tocsublinknumber">4.2.9<tt>&nbsp;</tt></span><a href="#%28part._db_delete-table_%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>delete-<wbr></wbr>table*</a></td></tr><tr><td><span class="tocsublinknumber">4.2.10<tt>&nbsp;</tt></span><a href="#%28part._db_is-keyspace%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>is-<wbr></wbr>keyspace</a></td></tr><tr><td><span class="tocsublinknumber">4.2.11<tt>&nbsp;</tt></span><a href="#%28part._db_is-table%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>is-<wbr></wbr>table</a></td></tr><tr><td><span class="tocsublinknumber">4.2.12<tt>&nbsp;</tt></span><a href="#%28part._db_tables%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>tables</a></td></tr><tr><td><span class="tocsublinknumber">4.2.13<tt>&nbsp;</tt></span><a href="#%28part._db_table_db_table_%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>table db:<span class="mywbr"> &nbsp;</span>table*</a></td></tr><tr><td><span class="tocsublinknumber">4.2.14<tt>&nbsp;</tt></span><a href="#%28part._keyspace_alloc-number%29" class="tocsubseclink" data-pltdoc="x">keyspace:<span class="mywbr"> &nbsp;</span>alloc-<wbr></wbr>number</a></td></tr><tr><td><span class="tocsublinknumber">4.2.15<tt>&nbsp;</tt></span><a href="#%28part._keyspace_dealloc-number%29" class="tocsubseclink" data-pltdoc="x">keyspace:<span class="mywbr"> &nbsp;</span>dealloc-<wbr></wbr>number</a></td></tr><tr><td><span class="tocsublinknumber">4.2.16<tt>&nbsp;</tt></span><a href="#%28part._.The_sql__.Functions%29" class="tocsubseclink" data-pltdoc="x">The sql:<span class="mywbr"> &nbsp;</span> Functions</a></td></tr><tr><td><span class="tocsublinknumber">4.2.17<tt>&nbsp;</tt></span><a href="#%28part._table_delete%29" class="tocsubseclink" data-pltdoc="x">table:<span class="mywbr"> &nbsp;</span>delete</a></td></tr><tr><td><span class="tocsublinknumber">4.2.18<tt>&nbsp;</tt></span><a href="#%28part._table_insert_table_insert_%29" class="tocsubseclink" data-pltdoc="x">table:<span class="mywbr"> &nbsp;</span>insert table:<span class="mywbr"> &nbsp;</span>insert*</a></td></tr><tr><td><span class="tocsublinknumber">4.2.19<tt>&nbsp;</tt></span><a href="#%28part._table_match%29" class="tocsubseclink" data-pltdoc="x">table:<span class="mywbr"> &nbsp;</span>match</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">6.1</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;6.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;6.1&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="Query-Parser.html" title="backward to &quot;3 Query-Parser&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;LIQUID library&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="tokens.html" title="forward to &quot;5 tokens&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db-lib&quot;">4<tt>&nbsp;</tt><a name="(part._db-lib)"></a>db-lib</h3><h4 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;Guide&quot;">4.1<tt>&nbsp;</tt><a name="(part._.Guide)"></a><a name="(mod-path._liquid/db-lib)"></a>Guide</h4><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=6.1" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._liquid%2Fdb-lib%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">liquid/db-lib</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <span class="stt">liquid-lib</span></span></td></tr></table></div><div class="SIntrapara">The <a href="#%28mod-path._liquid%2Fdb-lib%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">liquid/db-lib</span></a> library provides tools
for creating, deleting, and using tables in a database.</div></p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;A_LISP_friendly_Database_Interface&quot;">4.1.1<tt>&nbsp;</tt><a name="(part._.A_.L.I.S.P_friendly_.Database_.Interface)"></a>A LISP friendly Database Interface</h5><p>The following sections describe features of a simplified database interface useful
   for LISP programs that desire to have persistant relaitonal storage of data.</p><p>Due to these simplications this interface might not be useful when applied to a
   database that has been created by other means which make use of unrecognized
   features and types.</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;Program_Level_Type_Interpretation&quot;">4.1.2<tt>&nbsp;</tt><a name="(part._.Program_.Level_.Type_.Interpretation)"></a>Program Level Type Interpretation</h5><p>In a conventional table we are given a fixed number of columns and an indefinite number
   of rows.  Each column has a name and a type.</p><p>It is the type we take issue with here, as it is difficult for a contrived interface to
   have to deal with the difference in interpretation of type by the database server, the
   SQL language, and by LISP itself. One of the more serious divergences is that LISP
   programrans tend to deal with arbitrary length types, whereas databases typically have
   fixed length types.  The only common arbitrary length type in databases is that of
   text.</p><p>In order to circumvent these isssues of conversions and concommitant exceptions, the
   db-lib sets the type for all columns to text.  As all LISP types convert to and from
   text, this is actually a liberating feature rather than a constraining one.  Any type
   conversions then occur on the LISP side.  As text can be ordered, the database can
   still build indexes and perform comparisons.  One might even wonder in this day and age
   of 64 bit words if using text is even much of a constraint, as most any integer looks
   like a string of 8 characters.</p><p>This choice also relieves the SQL interface and interpreter from having to perform
   double type conversion, first to text, and the to the destination type, or vice versa.</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;Explicit_Key_Management&quot;">4.1.3<tt>&nbsp;</tt><a name="(part._.Explicit_.Key_.Management)"></a>Explicit Key Management</h5><p>A nagging problem in databases has been the limited number of keys available and
   lack of explicit management of keys within keyspaces.  Hence we provide LISP with
   direct access to a keyspace allocator and a key allocator.</p><p>Accordingly, when a program desires to have a unique key within a given keyspace, the
   program presents the keyspace to the interface and then the interface returns a unique
   key.  This is an allocation operation.  The program may later deallocate the key.  For
   record IDs the keyspace is typically the same as the table name and the record ID is
   then a uniquely allocated key.  It is up to the program to explicitly deallocate the
   key upon deleting a record.</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;Fetch_by_Match&quot;">4.1.4<tt>&nbsp;</tt><a name="(part._.Fetch_by_.Match)"></a>Fetch by Match</h5><p>We don&rsquo;t pass SQL through this interface. Instead all operations have function names.
   In order to fetch data we perform patter matching.  Of course we wish the server would
   do the pattern matching for us, but until someone implements a server side program for
   this, we do the matching on the client side, and even worse, we don&rsquo;t cache the
   fetches.  There is certainly a lot of room for improvement in our match implementation.</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;_with__Contexts&quot;">4.1.5<tt>&nbsp;</tt><a name="(part.__with__.Contexts)"></a>&rsquo;with&rsquo; Contexts</h5><p>Currently the interface connects to postgresql using the user&rsquo;s role and database via
    unix credentials.  However, in the fture we will have connetion contexts, then all
    library calls will have to occur within with-connection blocks.</p><p>Transactions occur within as-transaction blocks.  The transaction is closed when
    leaving the block.</p><p>Currently transactions blocks are also semaphore blocks, thus making them all
    independent.  This will have to be changed to have separate semaphores for each
    connection.  Semaphores are needed so that the instructions in transaction blocks
    on separate threads don&rsquo;t get shuffled together on one connection.</p><h4 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;reference&quot;">4.2<tt>&nbsp;</tt><a name="(part._reference)"></a>reference</h4><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;as-transaction&quot;">4.2.1<tt>&nbsp;</tt><a name="(part._as-transaction)"></a>as-transaction</h5><p>(as-transaction body ...)</p><p>This provides a scoped context for a transaction block.</p><p>(There is a current a bug affecting nesting of transactions blocks having to do with
        locking out other threads on the same connection ... priority issue, may hang when
        nested)</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;column-list&quot;">4.2.2<tt>&nbsp;</tt><a name="(part._column-list)"></a>column-list</h5><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db_alloc-name&quot;">4.2.3<tt>&nbsp;</tt><a name="(part._db_alloc-name)"></a>db:alloc-name</h5><p>Like db:alloc-number, but returns a unique string instead of a number.</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db_alloc-number&quot;">4.2.4<tt>&nbsp;</tt><a name="(part._db_alloc-number)"></a>db:alloc-number</h5><p>(db:alloc-number)</p><p>Either, a) returns a number not ever issued by this function before against the contextual
  database, even across sessions, or b) it returns a number that was issued before by this
  function, but was deallocated, and has not been issued since.</p><p>[Case b) can be turned off by setting xxx option, in the current implementation it is off.]</p><p>See also db:create-keyspace.  Note that <a href="#%28mod-path._liquid%2Fdb-lib%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">liquid/db-lib</span></a> reserves the
  keyspace &rsquo;unique_to_db&rsquo; to support this function, and the related function
  db:alloc-name.</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db_create-keyspace&quot;">4.2.5<tt>&nbsp;</tt><a name="(part._db_create-keyspace)"></a>db:create-keyspace</h5><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db_create-table&quot;">4.2.6<tt>&nbsp;</tt><a name="(part._db_create-table)"></a>db:create-table</h5><p>(db:create-table name column-count)</p><p>Accepts a name and a column count, then creates a table in the database with that name
        and number of columns, or throws an exception.   Returns nothing.</p><p>An exception will occur if the name already exists in the contextual database. [This
        behavior is set to change to no exception in future versions.]</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db_delete-keyspace&quot;">4.2.7<tt>&nbsp;</tt><a name="(part._db_delete-keyspace)"></a>db:delete-keyspace</h5><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db_delete-table&quot;">4.2.8<tt>&nbsp;</tt><a name="(part._db_delete-table)"></a>db:delete-table</h5><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db_delete-table_&quot;">4.2.9<tt>&nbsp;</tt><a name="(part._db_delete-table_)"></a>db:delete-table*</h5><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db_is-keyspace&quot;">4.2.10<tt>&nbsp;</tt><a name="(part._db_is-keyspace)"></a>db:is-keyspace</h5><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db_is-table&quot;">4.2.11<tt>&nbsp;</tt><a name="(part._db_is-table)"></a>db:is-table</h5><p>(db:is-table table-name)</p><p>Accepts a table name, returns a Boole.</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db_tables&quot;">4.2.12<tt>&nbsp;</tt><a name="(part._db_tables)"></a>db:tables</h5><p>(db:tables [rx #f])</p><p>Accepts an optional regular expression. Returns a list of matching table names, or if there
      is no regular expression, returns all the table names in the database.</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;db_table_db_table_&quot;">4.2.13<tt>&nbsp;</tt><a name="(part._db_table_db_table_)"></a>db:table db:table*</h5><p>(db:delete-table . ts)  (db:delete-table* ts)</p><p>Deletes the named tables.  The table names are literal.</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;keyspace_alloc-number&quot;">4.2.14<tt>&nbsp;</tt><a name="(part._keyspace_alloc-number)"></a>keyspace:alloc-number</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><span class="RktSymDef RktSym">keyspace:alloc-number</span></span><span class="hspace">&nbsp;</span><span class="RktVar">keyspace</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number%7E3f%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">number?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">keyspace</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Accepts a keyspace and returns a unique number within that keyspace.  See also db:create-keyspace.</div></p><p>See lynch-lib&rsquo;s (unique-to-session-number) and (unique-to-session-name) for unique values within a
  session. Note, unique numbers to the session may not be unique to the database.</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;keyspace_dealloc-number&quot;">4.2.15<tt>&nbsp;</tt><a name="(part._keyspace_dealloc-number)"></a>keyspace:dealloc-number</h5><p>(keyspace:dealloc-number keyspace id)</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;The_sql__Functions&quot;">4.2.16<tt>&nbsp;</tt><a name="(part._.The_sql__.Functions)"></a>The sql: Functions</h5><p>These are wrappers for the underlying db library.  They only difference is that they act on the
contextual connection. The * versions take lists, the others take variable parameters lists.  These are intended
to be used only as work workarounds.  In a later version they may go away.</p><p>sql:exec
      sql:exec*
      sql:value
      sql:value*
      sql:maybe-value
      sql:maybe-value*
      sql:row
      sql:row*
      sql:rows
      sql:rows*
      sql:list
      sql:list*</p><p>transaction:begin
      transaction:commit
      transaction:rollback</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;table_delete&quot;">4.2.17<tt>&nbsp;</tt><a name="(part._table_delete)"></a>table:delete</h5><p>(table:delete table-name a-pattern)</p><p>Accepts a table name and a pattern, then deletes all rows from the table that
    match the pattern.</p><p>If the table has more than one column, pattern must be a list.  Currently pattern
    is either an underscore or a literal.  An underscore matches anything.</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;table_insert_table_insert_&quot;">4.2.18<tt>&nbsp;</tt><a name="(part._table_insert_table_insert_)"></a>table:insert table:insert*</h5><p>(table:insert name . rows)
    (table:insert* name rows)</p><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;table_match&quot;">4.2.19<tt>&nbsp;</tt><a name="(part._table_match)"></a>table:match</h5><p>(table:match table-name pattern [a-filter identity])</p><p>Accepts a table name, a pattern, and optionally a filter function.  Returns all
    rows in the table that match the pattern.  If the filter is present then the filter
    is mapped over the rows to create the return value.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;6.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;6.1&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="Query-Parser.html" title="backward to &quot;3 Query-Parser&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;LIQUID library&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="tokens.html" title="forward to &quot;5 tokens&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>