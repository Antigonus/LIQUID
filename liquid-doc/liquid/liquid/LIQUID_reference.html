<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>2&nbsp;LIQUID reference</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">LIQUID library</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="LIQUID_guide.html" class="tocviewlink" data-pltdoc="x">LIQUID guide</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">LIQUID reference</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">LIQUID reference</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#%28part._.Real-.Time_.Support%29" class="tocviewlink" data-pltdoc="x">Real-<wbr></wbr>Time Support</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="#%28part._http-server%29" class="tocviewlink" data-pltdoc="x">http-<wbr></wbr>server</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="#%28part._.Query-.Parser%29" class="tocviewlink" data-pltdoc="x">Query-<wbr></wbr>Parser</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="#%28part._db-lib%29" class="tocviewlink" data-pltdoc="x">db-<wbr></wbr>lib reference</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="#%28part._tokens%29" class="tocviewlink" data-pltdoc="x">tokens</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.Real-.Time_.Support%29" class="tocsubseclink" data-pltdoc="x">Real-<wbr></wbr>Time Support</a></td></tr><tr><td><span class="tocsublinknumber">2.1.1<tt>&nbsp;</tt></span><a href="#%28part._fun-timed%29" class="tocsubseclink" data-pltdoc="x">fun-<wbr></wbr>timed</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._http-server%29" class="tocsubseclink" data-pltdoc="x">http-<wbr></wbr>server</a></td></tr><tr><td><span class="tocsublinknumber">2.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2.2.2<tt>&nbsp;</tt></span><a href="#%28part._page_function%29" class="tocsubseclink" data-pltdoc="x">page function</a></td></tr><tr><td><span class="tocsublinknumber">2.2.3<tt>&nbsp;</tt></span><a href="#%28part._hooking_the_page_function%29" class="tocsubseclink" data-pltdoc="x">hooking the page function</a></td></tr><tr><td><span class="tocsublinknumber">2.2.4<tt>&nbsp;</tt></span><a href="#%28part._running_the_server%29" class="tocsubseclink" data-pltdoc="x">running the server</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._.Query-.Parser%29" class="tocsubseclink" data-pltdoc="x">Query-<wbr></wbr>Parser</a></td></tr><tr><td><span class="tocsublinknumber">2.3.1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2.3.2<tt>&nbsp;</tt></span><a href="#%28part._query-parser%29" class="tocsubseclink" data-pltdoc="x">query-<wbr></wbr>parser</a></td></tr><tr><td><span class="tocsublinknumber">2.3.3<tt>&nbsp;</tt></span><a href="#%28part._query-parser-tokens%29" class="tocsubseclink" data-pltdoc="x">query-<wbr></wbr>parser-<wbr></wbr>tokens</a></td></tr><tr><td><span class="tocsublinknumber">2.3.3.1<tt>&nbsp;</tt></span><a href="#%28part._append-errorsyn%29" class="tocsubseclink" data-pltdoc="x">append-<wbr></wbr>errorsyn</a></td></tr><tr><td><span class="tocsublinknumber">2.3.3.2<tt>&nbsp;</tt></span><a href="#%28part._append-errint%29" class="tocsubseclink" data-pltdoc="x">append-<wbr></wbr>errint</a></td></tr><tr><td><span class="tocsublinknumber">2.3.3.3<tt>&nbsp;</tt></span><a href="#%28part._tok-make-errsyn%29" class="tocsubseclink" data-pltdoc="x">tok-<wbr></wbr>make-<wbr></wbr>errsyn</a></td></tr><tr><td><span class="tocsublinknumber">2.3.3.4<tt>&nbsp;</tt></span><a href="#%28part._tok-make-errint%29" class="tocsubseclink" data-pltdoc="x">tok-<wbr></wbr>make-<wbr></wbr>errint</a></td></tr><tr><td><span class="tocsublinknumber">2.4<tt>&nbsp;</tt></span><a href="#%28part._db-lib%29" class="tocsubseclink" data-pltdoc="x">db-<wbr></wbr>lib reference</a></td></tr><tr><td><span class="tocsublinknumber">2.4.1<tt>&nbsp;</tt></span><a href="#%28part._as-transaction%29" class="tocsubseclink" data-pltdoc="x">as-<wbr></wbr>transaction</a></td></tr><tr><td><span class="tocsublinknumber">2.4.2<tt>&nbsp;</tt></span><a href="#%28part._column-list%29" class="tocsubseclink" data-pltdoc="x">column-<wbr></wbr>list</a></td></tr><tr><td><span class="tocsublinknumber">2.4.3<tt>&nbsp;</tt></span><a href="#%28part._db_alloc-name%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>alloc-<wbr></wbr>name</a></td></tr><tr><td><span class="tocsublinknumber">2.4.4<tt>&nbsp;</tt></span><a href="#%28part._db_alloc-number%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>alloc-<wbr></wbr>number</a></td></tr><tr><td><span class="tocsublinknumber">2.4.5<tt>&nbsp;</tt></span><a href="#%28part._db_create-keyspace%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>create-<wbr></wbr>keyspace</a></td></tr><tr><td><span class="tocsublinknumber">2.4.6<tt>&nbsp;</tt></span><a href="#%28part._db_create-table%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>create-<wbr></wbr>table</a></td></tr><tr><td><span class="tocsublinknumber">2.4.7<tt>&nbsp;</tt></span><a href="#%28part._db_delete-keyspace%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>delete-<wbr></wbr>keyspace</a></td></tr><tr><td><span class="tocsublinknumber">2.4.8<tt>&nbsp;</tt></span><a href="#%28part._db_delete-table%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>delete-<wbr></wbr>table</a></td></tr><tr><td><span class="tocsublinknumber">2.4.9<tt>&nbsp;</tt></span><a href="#%28part._db_delete-table_%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>delete-<wbr></wbr>table*</a></td></tr><tr><td><span class="tocsublinknumber">2.4.10<tt>&nbsp;</tt></span><a href="#%28part._db_is-keyspace%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>is-<wbr></wbr>keyspace</a></td></tr><tr><td><span class="tocsublinknumber">2.4.11<tt>&nbsp;</tt></span><a href="#%28part._db_is-table%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>is-<wbr></wbr>table</a></td></tr><tr><td><span class="tocsublinknumber">2.4.12<tt>&nbsp;</tt></span><a href="#%28part._db_tables%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>tables</a></td></tr><tr><td><span class="tocsublinknumber">2.4.13<tt>&nbsp;</tt></span><a href="#%28part._db_table_db_table_%29" class="tocsubseclink" data-pltdoc="x">db:<span class="mywbr"> &nbsp;</span>table db:<span class="mywbr"> &nbsp;</span>table*</a></td></tr><tr><td><span class="tocsublinknumber">2.4.14<tt>&nbsp;</tt></span><a href="#%28part._keyspace_alloc-number%29" class="tocsubseclink" data-pltdoc="x">keyspace:<span class="mywbr"> &nbsp;</span>alloc-<wbr></wbr>number</a></td></tr><tr><td><span class="tocsublinknumber">2.4.15<tt>&nbsp;</tt></span><a href="#%28part._keyspace_dealloc-number%29" class="tocsubseclink" data-pltdoc="x">keyspace:<span class="mywbr"> &nbsp;</span>dealloc-<wbr></wbr>number</a></td></tr><tr><td><span class="tocsublinknumber">2.4.16<tt>&nbsp;</tt></span><a href="#%28part._.The_sql__.Functions%29" class="tocsubseclink" data-pltdoc="x">The sql:<span class="mywbr"> &nbsp;</span> Functions</a></td></tr><tr><td><span class="tocsublinknumber">2.4.17<tt>&nbsp;</tt></span><a href="#%28part._table_delete%29" class="tocsubseclink" data-pltdoc="x">table:<span class="mywbr"> &nbsp;</span>delete</a></td></tr><tr><td><span class="tocsublinknumber">2.4.18<tt>&nbsp;</tt></span><a href="#%28part._table_insert_table_insert_%29" class="tocsubseclink" data-pltdoc="x">table:<span class="mywbr"> &nbsp;</span>insert table:<span class="mywbr"> &nbsp;</span>insert*</a></td></tr><tr><td><span class="tocsublinknumber">2.4.19<tt>&nbsp;</tt></span><a href="#%28part._table_match%29" class="tocsubseclink" data-pltdoc="x">table:<span class="mywbr"> &nbsp;</span>match</a></td></tr><tr><td><span class="tocsublinknumber">2.5<tt>&nbsp;</tt></span><a href="#%28part._tokens%29" class="tocsubseclink" data-pltdoc="x">tokens</a></td></tr><tr><td><span class="tocsublinknumber">2.5.1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2.5.2<tt>&nbsp;</tt></span><a href="#%28part._typed-list%29" class="tocsubseclink" data-pltdoc="x">typed-<wbr></wbr>list</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">6.1</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="LIQUID_guide.html" title="backward to &quot;1 LIQUID guide&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;LIQUID library&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3>2<tt>&nbsp;</tt><a name="(part._.L.I.Q.U.I.D_reference)"></a>LIQUID reference</h3><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Real-.Time_.Support%29" class="toclink" data-pltdoc="x">2.1<span class="hspace">&nbsp;</span>Real-Time Support</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._fun-timed%29" class="toclink" data-pltdoc="x">2.1.1<span class="hspace">&nbsp;</span>fun-timed</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._http-server%29" class="toclink" data-pltdoc="x">2.2<span class="hspace">&nbsp;</span>http-server</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Introduction%29" class="toclink" data-pltdoc="x">2.2.1<span class="hspace">&nbsp;</span>Introduction</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._page_function%29" class="toclink" data-pltdoc="x">2.2.2<span class="hspace">&nbsp;</span>page function</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._hooking_the_page_function%29" class="toclink" data-pltdoc="x">2.2.3<span class="hspace">&nbsp;</span>hooking the page function</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._running_the_server%29" class="toclink" data-pltdoc="x">2.2.4<span class="hspace">&nbsp;</span>running the server</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Query-.Parser%29" class="toclink" data-pltdoc="x">2.3<span class="hspace">&nbsp;</span>Query-Parser</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Introduction%29" class="toclink" data-pltdoc="x">2.3.1<span class="hspace">&nbsp;</span>Introduction</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._query-parser%29" class="toclink" data-pltdoc="x">2.3.2<span class="hspace">&nbsp;</span>query-parser</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._query-parser-tokens%29" class="toclink" data-pltdoc="x">2.3.3<span class="hspace">&nbsp;</span>query-parser-tokens</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._append-errorsyn%29" class="toclink" data-pltdoc="x">2.3.3.1<span class="hspace">&nbsp;</span>append-errorsyn</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._append-errint%29" class="toclink" data-pltdoc="x">2.3.3.2<span class="hspace">&nbsp;</span>append-errint</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._tok-make-errsyn%29" class="toclink" data-pltdoc="x">2.3.3.3<span class="hspace">&nbsp;</span>tok-make-errsyn</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._tok-make-errint%29" class="toclink" data-pltdoc="x">2.3.3.4<span class="hspace">&nbsp;</span>tok-make-errint</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db-lib%29" class="toclink" data-pltdoc="x">2.4<span class="hspace">&nbsp;</span>db-lib reference</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._as-transaction%29" class="toclink" data-pltdoc="x">2.4.1<span class="hspace">&nbsp;</span>as-transaction</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._column-list%29" class="toclink" data-pltdoc="x">2.4.2<span class="hspace">&nbsp;</span>column-list</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db_alloc-name%29" class="toclink" data-pltdoc="x">2.4.3<span class="hspace">&nbsp;</span>db:alloc-name</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db_alloc-number%29" class="toclink" data-pltdoc="x">2.4.4<span class="hspace">&nbsp;</span>db:alloc-number</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db_create-keyspace%29" class="toclink" data-pltdoc="x">2.4.5<span class="hspace">&nbsp;</span>db:create-keyspace</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db_create-table%29" class="toclink" data-pltdoc="x">2.4.6<span class="hspace">&nbsp;</span>db:create-table</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db_delete-keyspace%29" class="toclink" data-pltdoc="x">2.4.7<span class="hspace">&nbsp;</span>db:delete-keyspace</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db_delete-table%29" class="toclink" data-pltdoc="x">2.4.8<span class="hspace">&nbsp;</span>db:delete-table</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db_delete-table_%29" class="toclink" data-pltdoc="x">2.4.9<span class="hspace">&nbsp;</span>db:delete-table*</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db_is-keyspace%29" class="toclink" data-pltdoc="x">2.4.10<span class="hspace">&nbsp;</span>db:is-keyspace</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db_is-table%29" class="toclink" data-pltdoc="x">2.4.11<span class="hspace">&nbsp;</span>db:is-table</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db_tables%29" class="toclink" data-pltdoc="x">2.4.12<span class="hspace">&nbsp;</span>db:tables</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._db_table_db_table_%29" class="toclink" data-pltdoc="x">2.4.13<span class="hspace">&nbsp;</span>db:table db:table*</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._keyspace_alloc-number%29" class="toclink" data-pltdoc="x">2.4.14<span class="hspace">&nbsp;</span>keyspace:alloc-number</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._keyspace_dealloc-number%29" class="toclink" data-pltdoc="x">2.4.15<span class="hspace">&nbsp;</span>keyspace:dealloc-number</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.The_sql__.Functions%29" class="toclink" data-pltdoc="x">2.4.16<span class="hspace">&nbsp;</span>The sql: Functions</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._table_delete%29" class="toclink" data-pltdoc="x">2.4.17<span class="hspace">&nbsp;</span>table:delete</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._table_insert_table_insert_%29" class="toclink" data-pltdoc="x">2.4.18<span class="hspace">&nbsp;</span>table:insert table:insert*</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._table_match%29" class="toclink" data-pltdoc="x">2.4.19<span class="hspace">&nbsp;</span>table:match</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._tokens%29" class="toclink" data-pltdoc="x">2.5<span class="hspace">&nbsp;</span>tokens</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Introduction%29" class="toclink" data-pltdoc="x">2.5.1<span class="hspace">&nbsp;</span>Introduction</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._typed-list%29" class="toclink" data-pltdoc="x">2.5.2<span class="hspace">&nbsp;</span>typed-list</a></p></td></tr></table><h4>2.1<tt>&nbsp;</tt><a name="(part._.Real-.Time_.Support)"></a>Real-Time Support</h4><h5>2.1.1<tt>&nbsp;</tt><a name="(part._fun-timed)"></a>fun-timed</h5><p>(fun-timed timeout fun)</p><p>Accepts a timeout value and a one operand function.  Returns a two element list.  The first element
  is a flag indicting if function returned naturally (was not interrupted), while the second is the function result.</p><p>The one operand given the function is a bass by value &rsquo;extend&rsquo; flag.  If this flag is set to true when the
  timeout occurs, the function is given another timeout amount of time to complete.  This features is used, for example,
  from within an http server session to indicate that indeed the client did respond, so we haven&rsquo;t timed out yet.</p><h4>2.2<tt>&nbsp;</tt><a name="(part._http-server)"></a>http-server</h4><h5>2.2.1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h5><p>This is http server facilitates the browsing of application pages.  Programmers use the
  function &rsquo;page-hook&rsquo; to associate link strings to programmer defined page functions.  When
  a browser visits the server and requests a given link string, the corresponding function
  is called.  The output from the page function is then sent back to the browser.</p><p>Browsing may be local for implementing a local application, or placed on a server for remote
  browsing as for a conventional website.</p><p>This server is implemented independent of the server provided with the standard racket
  libraries.  The thinking was that a server specific to a LIQUID application is simpler than a general
  purpose server, and that it may need to take a separate evolution path.</p><p>This server is multithreaded and employs the LIQUID module &rsquo;realtime&rsquo; for time out
  interrupts.  Currently we use single process threads so as to simplify development and
  debug. It is intended that this will change in a later version.</p><h5>2.2.2<tt>&nbsp;</tt><a name="(part._page_function)"></a>page function</h5><p>(define (page-hello the-tcp-context url)
      (parameterize ([current-output-port (tcp-context-out the-tcp-context)])
        (display (http-response))
        (display (html-str (html-header) "&lt;body&gt;hello&lt;br&gt;&lt;/body&gt;\r\n"))
        ))</p><p>A page function accepts a tcp context object and a url.</p><p>The tcp context object is defined in the lynch-lib module, It holds the TCP input and
  output stream objects, and identifying information for both the server and client IP
  address and port.  Typically the first line of the page function will bind the tcp
  output port wth the standard output port, and then the page function will display html
  to the standard output stream.</p><p>The url parameter is a url object as defined by the racket net/url package. This is the
  url the browser requested of the server.  Most page functions ignore this parameter.</p><p>The contents of the page function is anything defined by the programmer.</p><h5>2.2.3<tt>&nbsp;</tt><a name="(part._hooking_the_page_function)"></a>hooking the page function</h5><p>(page-hook "/server/hello" page-hello)</p><p>The http-server module provides the &rsquo;page-hook&rsquo; function for hooking server functions.  These can
  be hooked at any time, so a given page can provide new pages for the server.  Static websites will
  hook all their pages before running the server.</p><h5>2.2.4<tt>&nbsp;</tt><a name="(part._running_the_server)"></a>running the server</h5><p>As for the http-server lib in the main racket catelog, our server returns an function for stopping the
  server.  This leads to a paradoxical startup syntax of:</p><p>(define stop (http-server))</p><p>To run run the sever.  And then</p><p>(stop)</p><p>To stop the server.</p><p>http-server optionally accepts a parameter for a port number.  When spinning through run edit cycles
  while debugging an application it is common to find a server already using the default port, and thus
  to provide a new port number.</p><h4>2.3<tt>&nbsp;</tt><a name="(part._.Query-.Parser)"></a>Query-Parser</h4><h5>2.3.1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h5><p>This is a framework for writing context free (or a little bit of context) parsers,
   where the resulting parse will contain error tokens when things don&rsquo;t go as planned.
   The error tokens can then be scanned out to create informative error messages within
   context. The example shown is specifically for parsing conjunctive queries.</p><p>The basic approach is that of reccursive descent.  There is a top level rule provided
   by the program which attempts to parse the entire input.  This is the great grandaddy
   of all the rules.  Each parent rule then calls child rules in attempt to parse out
   sub-parts as specified by the grammar.  If the grammar allows for alternatives, then
   after a child rule mismatch, the parent rule will attempt the alternative child rule.
   Should no alternative match, then the parent will replace this part of the syntax part
   with an error token.</p><p>The rules we refer to here are functions, and these functions are written by the author
   of the parser.  Hence full knoweldge of the grammar and how to handle errors can be
   custom built into each rule by the programmer.</p><p>As an example, an example rule I have provided is for parsing &rsquo;framed&rsquo; lists of
   syntactical elements.  Here the framing is provided by a separator punctuation and some
   sort of last item separator.  The framing rule  does not do recursive descent, but
   instead correlates the framing pattern against the input.  This is more stable than
   doing recursive descent for such situations.  (The example framing rule can use
   some improvements.)</p><p>A parse rule reduces input text to a &rsquo;token&rsquo;.  A token is a list, where the head of the
   list is a type, and then this is followed by an attribute list, and then remaining
   members are childr tokens, if any.  The form is almost the same as that of x-expr for
   the html parser.  On the next version we will make them identical so the two tools can
   exchange data.</p><h5>2.3.2<tt>&nbsp;</tt><a name="(part._query-parser)"></a>query-parser</h5><p>(rule ts [imperative (imperative:try)])</p><p>Each rule accepts a list of tokens and an optional mode, then returns #f or a token.  Typically
   the rule will want to match all of the tokens in the token list.  The two modes are:</p><p>imperative:try
     imperative:force</p><p>In the imperative:try mode the rule must return #f when there is no match.  In the
   imperative:force mode the rule must return an error token when there is no match.
   Error reports from a rule only go into the return token, so at the election of the
   parent rule, an error token returned from a child rule can be interpreted to mean as
   little as that there was a mismatch, or mean something so serious that the parent rule
   also must fail.</p><p>Error tokens have an attribute set that marks them as such.  An error token can be unique for the
   error condition, or it can simply be a regular token with annotation saying there was an error.</p><p>The example query-parser is called with:</p><p>(query-parser in)</p><h5>2.3.3<tt>&nbsp;</tt><a name="(part._query-parser-tokens)"></a>query-parser-tokens</h5><p>This module defines some fundamental tokens.</p><p>(tok:comment)
    (tok:errsyn)
    (tok:lex-other)
    (tok:null)
    (tok:number)
    (tok:punc)
    (tok:string)
    (tok:symbol)
    (tok:paren-node)</p><p>The query parser example adds these tokens:</p><p>(tok:conjunction)
    (tok:operand)
    (tok:operand-list)
    (tok:pattern)
    (tok:pred)</p><p>These utility functions are provided:</p><h5>2.3.3.1<tt>&nbsp;</tt><a name="(part._append-errorsyn)"></a>append-errorsyn</h5><p>(append-errorsyn ts t mess)</p><p>ts is the list of tokens were were attempting to parse when the error occured.  t is a token without an error message.
   mess is the error message.  Returns the token with error attributes added.</p><h5>2.3.3.2<tt>&nbsp;</tt><a name="(part._append-errint)"></a>append-errint</h5><p>(append-errint ts t mess)</p><p>Similar to append-errosyn, but also causes the error to be logged.</p><h5>2.3.3.3<tt>&nbsp;</tt><a name="(part._tok-make-errsyn)"></a>tok-make-errsyn</h5><p>(tok-make-errsyn ts tok-type generator message)</p><p>Similar to append-errorsyn, but creates a new token rather than modifying one that is passed in.</p><h5>2.3.3.4<tt>&nbsp;</tt><a name="(part._tok-make-errint)"></a>tok-make-errint</h5><p>(tok-make-errint ts tok-type generator mess)</p><p>Similar to append-errint, but creates a new token rather than modifying one that is passed in.</p><p>punc-val-is    accepts a token and a value returns a bool</p><h4>2.4<tt>&nbsp;</tt><a name="(part._db-lib)"></a>db-lib reference</h4><h5>2.4.1<tt>&nbsp;</tt><a name="(part._as-transaction)"></a>as-transaction</h5><p>(as-transaction body ...)</p><p>This provides a scoped context for a transaction block.</p><p>(There is a current a bug affecting nesting of transactions blocks having to do with
        locking out other threads on the same connection ... priority issue, may hang when
        nested)</p><h5>2.4.2<tt>&nbsp;</tt><a name="(part._column-list)"></a>column-list</h5><h5>2.4.3<tt>&nbsp;</tt><a name="(part._db_alloc-name)"></a>db:alloc-name</h5><p>Like db:alloc-number, but returns a unique string instead of a number.</p><h5>2.4.4<tt>&nbsp;</tt><a name="(part._db_alloc-number)"></a>db:alloc-number</h5><p>(db:alloc-number)</p><p>Either, a) returns a number not ever issued by this function before against the contextual
  database, even across sessions, or b) it returns a number that was issued before by this
  function, but was deallocated, and has not been issued since.</p><p>[Case b) can be turned off by setting xxx option, in the current implementation it is off.]</p><p>See also db:create-keyspace.  Note that <a href="LIQUID_guide.html#%28mod-path._liquid%2Fdb-lib%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">liquid/db-lib</span></a> reserves the
  keyspace &rsquo;unique_to_db&rsquo; to support this function, and the related function
  db:alloc-name.</p><h5>2.4.5<tt>&nbsp;</tt><a name="(part._db_create-keyspace)"></a>db:create-keyspace</h5><h5>2.4.6<tt>&nbsp;</tt><a name="(part._db_create-table)"></a>db:create-table</h5><p>(db:create-table name column-count)</p><p>Accepts a name and a column count, then creates a table in the database with that name
        and number of columns, or throws an exception.   Returns nothing.</p><p>An exception will occur if the name already exists in the contextual database. [This
        behavior is set to change to no exception in future versions.]</p><h5>2.4.7<tt>&nbsp;</tt><a name="(part._db_delete-keyspace)"></a>db:delete-keyspace</h5><h5>2.4.8<tt>&nbsp;</tt><a name="(part._db_delete-table)"></a>db:delete-table</h5><h5>2.4.9<tt>&nbsp;</tt><a name="(part._db_delete-table_)"></a>db:delete-table*</h5><h5>2.4.10<tt>&nbsp;</tt><a name="(part._db_is-keyspace)"></a>db:is-keyspace</h5><h5>2.4.11<tt>&nbsp;</tt><a name="(part._db_is-table)"></a>db:is-table</h5><p>(db:is-table table-name)</p><p>Accepts a table name, returns a Boole.</p><h5>2.4.12<tt>&nbsp;</tt><a name="(part._db_tables)"></a>db:tables</h5><p>(db:tables [rx #f])</p><p>Accepts an optional regular expression. Returns a list of matching table names, or if there
      is no regular expression, returns all the table names in the database.</p><h5>2.4.13<tt>&nbsp;</tt><a name="(part._db_table_db_table_)"></a>db:table db:table*</h5><p>(db:delete-table . ts)  (db:delete-table* ts)</p><p>Deletes the named tables.  The table names are literal.</p><h5>2.4.14<tt>&nbsp;</tt><a name="(part._keyspace_alloc-number)"></a>keyspace:alloc-number</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><span class="RktSymDef RktSym">keyspace:alloc-number</span></span><span class="hspace">&nbsp;</span><span class="RktVar">keyspace</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">number?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">keyspace</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span></td></tr></table></blockquote></div><div class="SIntrapara">Accepts a keyspace and returns a unique number within that keyspace.  See also db:create-keyspace.</div></p><p>See lynch-lib&rsquo;s (unique-to-session-number) and (unique-to-session-name) for unique values within a
  session. Note, unique numbers to the session may not be unique to the database.</p><h5>2.4.15<tt>&nbsp;</tt><a name="(part._keyspace_dealloc-number)"></a>keyspace:dealloc-number</h5><p>(keyspace:dealloc-number keyspace id)</p><h5>2.4.16<tt>&nbsp;</tt><a name="(part._.The_sql__.Functions)"></a>The sql: Functions</h5><p>These are wrappers for the underlying db library.  They only difference is that they act on the
contextual connection. The * versions take lists, the others take variable parameters lists.  These are intended
to be used only as work workarounds.  In a later version they may go away.</p><p>sql:exec
      sql:exec*
      sql:value
      sql:value*
      sql:maybe-value
      sql:maybe-value*
      sql:row
      sql:row*
      sql:rows
      sql:rows*
      sql:list
      sql:list*</p><p>transaction:begin
      transaction:commit
      transaction:rollback</p><h5>2.4.17<tt>&nbsp;</tt><a name="(part._table_delete)"></a>table:delete</h5><p>(table:delete table-name a-pattern)</p><p>Accepts a table name and a pattern, then deletes all rows from the table that
    match the pattern.</p><p>If the table has more than one column, pattern must be a list.  Currently pattern
    is either an underscore or a literal.  An underscore matches anything.</p><h5>2.4.18<tt>&nbsp;</tt><a name="(part._table_insert_table_insert_)"></a>table:insert table:insert*</h5><p>(table:insert name . rows)
    (table:insert* name rows)</p><h5>2.4.19<tt>&nbsp;</tt><a name="(part._table_match)"></a>table:match</h5><p>(table:match table-name pattern [a-filter identity])</p><p>Accepts a table name, a pattern, and optionally a filter function.  Returns all
    rows in the table that match the pattern.  If the filter is present then the filter
    is mapped over the rows to create the return value.</p><h4>2.5<tt>&nbsp;</tt><a name="(part._tokens)"></a>tokens</h4><h5>2.5.1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h5><p>This module defines typed list, attribute, and token.</p><p>The car element of a typed list is a type name.</p><p>Attributes are typed lists where the type is found in a list of legal attributes. The
  remaining format for an attribute depends on the attribute, often they are duck typed.
  Attributes are typically used to annotate tokens with information such as error
  messages. They are not intended to be structural.</p><p>A token has attributes and children tokens.  The children token list facilitates
  building trees.</p><h5>2.5.2<tt>&nbsp;</tt><a name="(part._typed-list)"></a>typed-list</h5><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="LIQUID_guide.html" title="backward to &quot;1 LIQUID guide&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;LIQUID library&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>