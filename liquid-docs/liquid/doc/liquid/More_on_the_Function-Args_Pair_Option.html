<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>3.2.5&nbsp;More on the Function-Args Pair Option</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="file:///usr/share/doc/racket/local-redirect/local-redirect.js"></script><script type="text/javascript" src="file:///home/mordecai/.racket/6.1/doc/local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Racket Library Support for LIQUID</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="About_LIQUID.html" class="tocviewlink" data-pltdoc="x">About LIQUID</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Concepts.html" class="tocviewlink" data-pltdoc="x">Concepts</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Architecture.html" class="tocviewselflink" data-pltdoc="x">Architecture</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Reference.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Examples.html" class="tocviewlink" data-pltdoc="x">Examples</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="To-Do.html" class="tocviewlink" data-pltdoc="x">To-<wbr></wbr>Do</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="Architecture.html" class="tocviewlink" data-pltdoc="x">Architecture</a></td></tr></table><div class="tocviewsublist" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="Dataplex.html" class="tocviewlink" data-pltdoc="x">Dataplex</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="Multiple_Execution_Path_Exits_Architecture.html" class="tocviewselflink" data-pltdoc="x">Multiple Execution Path Exits Architecture</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9660;</a></td><td>3.2&nbsp;</td><td><a href="Multiple_Execution_Path_Exits_Architecture.html" class="tocviewlink" data-pltdoc="x">Multiple Execution Path Exits Architecture</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.2.1&nbsp;</td><td><a href="The_Basic_Approach.html" class="tocviewlink" data-pltdoc="x">The Basic Approach</a></td></tr><tr><td align="right">3.2.2&nbsp;</td><td><a href="Reduction_to_Conventional_Functions.html" class="tocviewlink" data-pltdoc="x">Reduction to Conventional Functions</a></td></tr><tr><td align="right">3.2.3&nbsp;</td><td><a href="Why_Multiple_Continuations_are_Needed.html" class="tocviewlink" data-pltdoc="x">Why Multiple Continuations are Needed</a></td></tr><tr><td align="right">3.2.4&nbsp;</td><td><a href="OfPCFA.html" class="tocviewlink" data-pltdoc="x">Option for Passing Continuation Function Arguments</a></td></tr><tr><td align="right">3.2.5&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">More on the Function-<wbr></wbr>Args Pair Option</a></td></tr><tr><td align="right">3.2.6&nbsp;</td><td><a href="Manual_Method.html" class="tocviewlink" data-pltdoc="x">Manual Method</a></td></tr><tr><td align="right">3.2.7&nbsp;</td><td><a href="Eval_With_Scoped_Variables.html" class="tocviewlink" data-pltdoc="x">Eval With Scoped Variables</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;6.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;6.1&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="OfPCFA.html" title="backward to &quot;3.2.4 Option for Passing Continuation Function Arguments&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Multiple_Execution_Path_Exits_Architecture.html" title="up to &quot;3.2 Multiple Execution Path Exits Architecture&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Manual_Method.html" title="forward to &quot;3.2.6 Manual Method&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;More_on_the_Function-Args_Pair_Option&quot;">3.2.5<tt>&nbsp;</tt><a name="(part._.More_on_the_.Function-.Args_.Pair_.Option)"></a>More on the Function-Args Pair Option</h5><p>We have opted for the pair approach.  We handle the contract of maintaining context to
arguments to the main function which might be referenced in a continuation, by currying all
continuation functions against these arguments.  We then pass the curried version to the
helper (if indeed such continue function passing occurs at all).  We also allow that if a
continuation is provided without an argument list in a pair, that the library may chose
the arguments. These default choice is specified in the docs, but may change between
versions.  Thus in typical cases we do not have to specify continuation arguments.  All
this requires some work so I have created a customer function definition form to handle
it.</p><p>Accordingly our <span class="RktSym">x-hash-ref</span> call example becomes:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt">(define a 7)</span></p></td></tr><tr><td><p><span class="stt">(x-hash-ref (&#923; table a)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(&#923;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cons (&#955;(v) (display "found") (displayln v))</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">'(result))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cons (&#955;(k) (display "no such key: ") (displayln k))</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">'(key))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt">...</span></p></td></tr></table></p><p>The first list passed to x-hashref is the argument list.  The second one is the continuations
list.  This will be true in general for functions defined with continuations using the
syntax form <span class="RktSym">dfc</span>.</p><p>The first pair in the continuations list has a <span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdr%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">cdr</a></span> of <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">result</span><span class="RktVal">)</span>, but it
was not necessary to provide this because <span class="RktSym">continue-ok</span> is called with the look-up
result by default.  I.e. I could have written:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt">(define a 7)</span></p></td></tr><tr><td><p><span class="stt">(x-hash-ref (&#923; table a)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(&#923;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(&#955;(v) (display "found") (displayln v))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cons (&#955;(k) (display "no such key: ") (displayln k))</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">'(key))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt">...</span></p></td></tr></table></p><p>I find it interesting that the use of specifiers for the continuation argument forces the
library programmer to provide names for its return values.  In this case the return value
given to the first continuation is called <span class="RktSym">result</span> while the return value given to
the second continuation is <span class="RktSym">key</span>.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;6.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;6.1&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="OfPCFA.html" title="backward to &quot;3.2.4 Option for Passing Continuation Function Arguments&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Multiple_Execution_Path_Exits_Architecture.html" title="up to &quot;3.2 Multiple Execution Path Exits Architecture&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Manual_Method.html" title="forward to &quot;3.2.6 Manual Method&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>