<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>4.1&nbsp;test-lib</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="file:///usr/share/doc/racket/local-redirect/local-redirect.js"></script><script type="text/javascript" src="file:///home/mordecai/.racket/6.1/doc/local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Racket Library Support for LIQUID</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="About_LIQUID.html" class="tocviewlink" data-pltdoc="x">About LIQUID</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Concepts.html" class="tocviewlink" data-pltdoc="x">Concepts</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Architecture.html" class="tocviewlink" data-pltdoc="x">Architecture</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Reference.html" class="tocviewselflink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Examples.html" class="tocviewlink" data-pltdoc="x">Examples</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="To-Do.html" class="tocviewlink" data-pltdoc="x">To-<wbr></wbr>Do</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>4&nbsp;</td><td><a href="Reference.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">4.1&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">test-<wbr></wbr>lib</a></td></tr><tr><td align="right">4.2&nbsp;</td><td><a href="lang-reference.html" class="tocviewlink" data-pltdoc="x">Language Extentions Reference</a></td></tr><tr><td align="right">4.3&nbsp;</td><td><a href="db-lib-reference.html" class="tocviewlink" data-pltdoc="x">db-<wbr></wbr>lib</a></td></tr><tr><td align="right">4.4&nbsp;</td><td><a href="dataplex-reference.html" class="tocviewlink" data-pltdoc="x">dataplex</a></td></tr><tr><td align="right">4.5&nbsp;</td><td><a href="realtime-reference.html" class="tocviewlink" data-pltdoc="x">realtime</a></td></tr><tr><td align="right">4.6&nbsp;</td><td><a href="http-session-ref.html" class="tocviewlink" data-pltdoc="x">http-<wbr></wbr>session</a></td></tr><tr><td align="right">4.7&nbsp;</td><td><a href="http-server-ref.html" class="tocviewlink" data-pltdoc="x">http-<wbr></wbr>server</a></td></tr><tr><td align="right">4.8&nbsp;</td><td><a href="http-server-pages-ref.html" class="tocviewlink" data-pltdoc="x">http-<wbr></wbr>server-<wbr></wbr>pages</a></td></tr><tr><td align="right">4.9&nbsp;</td><td><a href="object-reference.html" class="tocviewlink" data-pltdoc="x">TCA Objects</a></td></tr><tr><td align="right">4.10&nbsp;</td><td><a href="parser-ref.html" class="tocviewlink" data-pltdoc="x">parser</a></td></tr><tr><td align="right">4.11&nbsp;</td><td><a href="filter-ref.html" class="tocviewlink" data-pltdoc="x">filter</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28form._%28%28lib._liquid%2Ftest-lib..rkt%29._provide-with-trace%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym">provide-<wbr></wbr>with-<wbr></wbr>trace</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._liquid%2Ftest-lib..rkt%29._test-hook%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym">test-<wbr></wbr>hook</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._liquid%2Ftest-lib..rkt%29._test-remove%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym">test-<wbr></wbr>remove</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._liquid%2Ftest-lib..rkt%29._test-all%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym">test-<wbr></wbr>all</span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">6.1</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;6.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;6.1&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="Reference.html" title="backward to &quot;4 Reference&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Reference.html" title="up to &quot;4 Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lang-reference.html" title="forward to &quot;4.2 Language Extentions Reference&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;testlib-reference&quot;">4.1<tt>&nbsp;</tt><a name="(part._testlib-reference)"></a><a name="(mod-path._liquid/test-lib)"></a>test-lib</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=6.1" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">liquid/test-lib</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <span class="stt">liquid-doc</span></span></td></tr></table></p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._liquid/test-lib..rkt)._provide-with-trace))"></a><span title="Provided from: liquid/test-lib | Package: liquid-doc"><span class="RktSym"><span class="RktSymDef RktSym">provide-with-trace</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">prefix</span><span class="hspace">&nbsp;</span><span class="RktVar">function</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p>Provides the listed functions, and also defines two additional functions:  <span class="RktSym">prefix-trace</span>
  and <span class="RktSym">prefix-untrace</span>.  These turn on, or off, tracing for all of the provided functions.
  So for example, to trace turn on tracing for the interface to the test-lib library use the
  invoke the function (test-lib-trace).</p><p>The <span class="RktSym">function</span> arguments must be of the type that (trace function) will work.  One cannot,
  as examples, provide module variables or syntax transformers with this form.</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._liquid/test-lib..rkt)._test-hook))"></a><span title="Provided from: liquid/test-lib | Package: liquid-doc"><span class="RktSym"><span class="RktSymDef RktSym">test-hook</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">a-test</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">a-test</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span></td></tr></table></blockquote><p>Hooks the procedure into the list of test procedures that will be run when
  <span class="RktSym">test-all</span> is invoked.</p><p>The procedure will be invoked with no arguments.  It is considered to be a passing test
  if it returns Boolean true.  If the test causes an exception or returns any other value,
  it is considered to have failed.</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._liquid/test-lib..rkt)._test-remove))"></a><span title="Provided from: liquid/test-lib | Package: liquid-doc"><span class="RktSym"><span class="RktSymDef RktSym">test-remove</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">a-test</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">a-test</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span></td></tr></table></blockquote><p>Removes the procedure from the hooked test procedures list.</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._liquid/test-lib..rkt)._test-all))"></a><span title="Provided from: liquid/test-lib | Package: liquid-doc"><span class="RktSym"><span class="RktSymDef RktSym">test-all</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">a-test</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">a-test</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span></td></tr></table></blockquote><p><span class="RktSym">test-all</span> starts by running three built in tests.  The first of these built in
  tests will pass, the second will fail due to not returning &rsquo;#t&rsquo;, and the third will fail
  due to an exception.  This shows the user that the test mechanism is working, and what
  pass, fail, fail with exception, and the summary message looks like.</p><p><span class="RktSym">test-all</span> then removes the built in tests and runs the tests on the hook list.
  At the end it provides a summary of how many passed and failed.  Any messages printed
  out by the tests will be dumped into the running summary of pass fails.</p><p>A test must return Boolean true to have passed, i.e. <span class="RktPn">(</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._eqv%7E3f%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">eqv?</a></span><span class="stt"> </span><span class="RktVal">#t</span><span class="stt"> </span><span class="RktSym">return-value</span><span class="RktPn">)</span>
  must be true.  Exceptions are caught and noted as failures.  If you need to tests
  exceptions then have your test handle these and return true if they are correct.</p><p><span class="RktSym">test-all</span> returns either Boolean true (<span class="RktPn">(</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._eqv%7E3f%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">eqv?</a></span><span class="stt"> </span><span class="RktVal">#t</span><span class="stt"> </span><span class="RktSym">test-all-return</span><span class="RktPn">)</span>), or false.
  (<span class="RktPn">(</span><span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._eqv%7E3f%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">eqv?</a></span><span class="stt"> </span><span class="RktVal">#f</span><span class="stt"> </span><span class="RktSym">test-all-return</span><span class="RktPn">)</span>).  It never throw and exception.  (Otherwise it is broken.)</p><p>As a convention, do not print messages from your test routines.  Instead, if the test
  needs to tell the user something it should fail.  The user can then go back and run the
  test manually.  Tests can accept an optional argument that can be provided to turn on
  noise during manual invocation.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;6.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;6.1&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="Reference.html" title="backward to &quot;4 Reference&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Reference.html" title="up to &quot;4 Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lang-reference.html" title="forward to &quot;4.2 Language Extentions Reference&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>