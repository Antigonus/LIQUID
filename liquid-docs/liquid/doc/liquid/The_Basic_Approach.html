<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>3.2.1&nbsp;The Basic Approach</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="file:///usr/share/doc/racket/local-redirect/local-redirect.js"></script><script type="text/javascript" src="file:///home/mordecai/.racket/6.1/doc/local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Racket Library Support for LIQUID</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="About_LIQUID.html" class="tocviewlink" data-pltdoc="x">About LIQUID</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Concepts.html" class="tocviewlink" data-pltdoc="x">Concepts</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Architecture.html" class="tocviewselflink" data-pltdoc="x">Architecture</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Reference.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Examples.html" class="tocviewlink" data-pltdoc="x">Examples</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="To-Do.html" class="tocviewlink" data-pltdoc="x">To-<wbr></wbr>Do</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="Architecture.html" class="tocviewlink" data-pltdoc="x">Architecture</a></td></tr></table><div class="tocviewsublist" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="Dataplex.html" class="tocviewlink" data-pltdoc="x">Dataplex</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="Multiple_Execution_Path_Exits_Architecture.html" class="tocviewselflink" data-pltdoc="x">Multiple Execution Path Exits Architecture</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9660;</a></td><td>3.2&nbsp;</td><td><a href="Multiple_Execution_Path_Exits_Architecture.html" class="tocviewlink" data-pltdoc="x">Multiple Execution Path Exits Architecture</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.2.1&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">The Basic Approach</a></td></tr><tr><td align="right">3.2.2&nbsp;</td><td><a href="Reduction_to_Conventional_Functions.html" class="tocviewlink" data-pltdoc="x">Reduction to Conventional Functions</a></td></tr><tr><td align="right">3.2.3&nbsp;</td><td><a href="Why_Multiple_Continuations_are_Needed.html" class="tocviewlink" data-pltdoc="x">Why Multiple Continuations are Needed</a></td></tr><tr><td align="right">3.2.4&nbsp;</td><td><a href="OfPCFA.html" class="tocviewlink" data-pltdoc="x">Option for Passing Continuation Function Arguments</a></td></tr><tr><td align="right">3.2.5&nbsp;</td><td><a href="More_on_the_Function-Args_Pair_Option.html" class="tocviewlink" data-pltdoc="x">More on the Function-<wbr></wbr>Args Pair Option</a></td></tr><tr><td align="right">3.2.6&nbsp;</td><td><a href="Manual_Method.html" class="tocviewlink" data-pltdoc="x">Manual Method</a></td></tr><tr><td align="right">3.2.7&nbsp;</td><td><a href="Eval_With_Scoped_Variables.html" class="tocviewlink" data-pltdoc="x">Eval With Scoped Variables</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;6.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;6.1&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="Multiple_Execution_Path_Exits_Architecture.html" title="backward to &quot;3.2 Multiple Execution Path Exits Architecture&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Multiple_Execution_Path_Exits_Architecture.html" title="up to &quot;3.2 Multiple Execution Path Exits Architecture&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Reduction_to_Conventional_Functions.html" title="forward to &quot;3.2.2 Reduction to Conventional Functions&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h5 x-source-module="(lib &quot;liquid/liquid.scrbl&quot;)" x-part-tag="&quot;The_Basic_Approach&quot;">3.2.1<tt>&nbsp;</tt><a name="(part._.The_.Basic_.Approach)"></a>The Basic Approach</h5><p>As a matter of convention, we simplify function calls by not using variable arguments, but
instead where variable arguments are required we use explicit lists.  We make this more
convenient by introducing the Unicode capital lambda, &#923;, as a synonym for <span class="RktSym"><a href="http://download.racket-lang.org/docs/6.1/html/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=6.1" class="RktValLink Sq" data-pltdoc="x">list</a></span>.
In Emacs I have added both &#955; and &#923; to my key map as alt-l  and alt-shift-l.</p><p>Our basic approach is to pass continuation functions as arguments.  By convention the
first function is the &rsquo;normal flow&rsquo;.  By convention we call the first function
continuation-ok.  For example, this is the definition for an extended hash ref that takes
continuation functions.  It is implemented as a wrapper.  Of course it would be better to
have a native version.</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">(define (x-hash-ref table key continue-ok continue-key-not-found)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(define ok #t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(define result (hash-ref table key (&#955;() (set! ok #f))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(cond</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[ok (continue-ok result)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[else (continue-key-not-found)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">))</span></p></td></tr></table></p><p>Using x-hash-ref might appear something like:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt">(define a 7)</span></p></td></tr><tr><td><p><span class="stt">(x-hash-ref table a</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(&#955;(v) (display "found: ")(displayln v))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(&#955;()</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(displayln "did not find 7 :-("))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">...</span></p></td></tr></table></p><p>The code that follows the function becomes a continuation for the final function
continuation.  The tail position from the final function continuation will be the
ultimate value for the function.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;6.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;6.1&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="Multiple_Execution_Path_Exits_Architecture.html" title="backward to &quot;3.2 Multiple Execution Path Exits Architecture&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Multiple_Execution_Path_Exits_Architecture.html" title="up to &quot;3.2 Multiple Execution Path Exits Architecture&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Reduction_to_Conventional_Functions.html" title="forward to &quot;3.2.2 Reduction to Conventional Functions&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>